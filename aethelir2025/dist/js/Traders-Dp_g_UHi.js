import{j as e,D as ce,S as H}from"./index-BSdoB3kj.js";import{R as ae,r as n}from"./chart-vendor-Dw_LCnh4.js";import{W as ie,X as de,Y as ue,c as he,Z as fe,K as xe}from"./icon-vendor-CFCYlFMW.js";import"./react-vendor-B--z-fyW.js";class pe extends ae.Component{constructor(f){super(f),this.state={hasError:!1}}static getDerivedStateFromError(f){return{hasError:!0}}componentDidCatch(f,v){console.error("Whiteboard Error:",f,v)}render(){return this.state.hasError?e.jsx("div",{className:"flex items-center justify-center h-full w-full bg-slate-50 text-slate-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Something went wrong with the whiteboard."}),e.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-4 py-2 bg-slate-200 rounded hover:bg-slate-300 transition",children:"Try Again"})]})}):this.props.children}}const me=({className:j=""})=>{const f=n.useRef(null),v=n.useRef(null),E=n.useRef([]),x=n.useRef(null),p=n.useRef({scale:1,offset:{x:0,y:0}}),[,N]=n.useState(0),[C,b]=n.useState("pen"),[F,$]=n.useState("#000000"),[L,J]=n.useState(3),[V,u]=n.useState(0),[K,B]=n.useState(!1),X=n.useRef(!1),Y=n.useRef(!1),P=n.useRef(null),s=n.useRef(0),m=n.useRef(null),g=n.useRef(!1),S=["#000000","#FF0000","#0000FF","#00FF00"],R=n.useCallback(()=>{const t=v.current;if(!t)return;const r=t.getContext("2d",{willReadFrequently:!1,alpha:!0});if(!r)return;const c=t.width,o=t.height;r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,c,o);const{scale:l,offset:a}=p.current;r.setTransform(l,0,0,l,a.x,a.y);const h=-a.x/l,d=-a.y/l,I=(c-a.x)/l,O=(o-a.y)/l,z=w=>{if(!(w.points.length<2||!w.points.some(y=>y.x>=h-100&&y.x<=I+100&&y.y>=d-100&&y.y<=O+100))){r.beginPath(),r.strokeStyle=w.tool==="pen"?w.color:"#FFFFFF",r.lineWidth=w.size,r.lineCap="round",r.lineJoin="round",r.moveTo(w.points[0].x,w.points[0].y);for(let y=1;y<w.points.length;y++)r.lineTo(w.points[y].x,w.points[y].y);r.stroke()}};E.current.forEach(z),x.current&&z(x.current)},[]),i=n.useCallback(()=>{g.current||(g.current=!0,m.current!==null&&cancelAnimationFrame(m.current),m.current=requestAnimationFrame(()=>{g.current=!1,m.current=null,R()}))},[R]);n.useEffect(()=>{const t=f.current;if(!t)return;const r=o=>{if(o.ctrlKey){o.preventDefault(),o.stopPropagation();const{scale:l,offset:a}=p.current,h=v.current;if(!h)return;const d=h.getBoundingClientRect(),O=-o.deltaY*.001,z=Math.min(Math.max(.1,l+O),10),w=o.clientX-d.left,q=o.clientY-d.top,y=h.width/d.width,te=h.height/d.height,Z=w*y,Q=q*te,se=(Z-a.x)/l,ne=(Q-a.y)/l,re=Z-se*z,oe=Q-ne*z;p.current={scale:z,offset:{x:re,y:oe}},i(),N(le=>le+1)}},c=o=>{(o.ctrlKey||o.metaKey)&&(o.code==="KeyZ"||o.key==="z")&&!o.shiftKey&&(o.preventDefault(),o.stopPropagation(),E.current.length>0&&(E.current.pop(),s.current+=1,u(s.current),i()))};return t.addEventListener("wheel",r,{passive:!1}),window.addEventListener("keydown",c,{capture:!0}),()=>{t.removeEventListener("wheel",r),window.removeEventListener("keydown",c,{capture:!0})}},[i]),n.useEffect(()=>()=>{m.current!==null&&cancelAnimationFrame(m.current)},[]),n.useEffect(()=>{const t=f.current;if(!t)return;const r=new ResizeObserver(c=>{for(const o of c){const l=v.current;if(!l)continue;const{width:a,height:h}=o.contentRect;if(a===0||h===0)return;const d=window.devicePixelRatio||1;(l.width!==a*d||l.height!==h*d)&&(l.width=a*d,l.height=h*d,l.style.width=`${a}px`,l.style.height=`${h}px`,i())}});return r.observe(t),()=>{r.disconnect()}},[i]);const k=n.useCallback(t=>{const r=v.current;if(!r)return{x:0,y:0};const c=r.getBoundingClientRect(),o=t.clientX-c.left,l=t.clientY-c.top,a=r.width,h=r.height,d=c.width,I=c.height,O=a/d,z=h/I;return{x:o*O,y:l*z}},[]),D=t=>{const{scale:r,offset:c}=p.current;return{x:(t.x-c.x)/r,y:(t.y-c.y)/r}},T=t=>{if(t.button===1||C==="pan"||t.button===0&&t.shiftKey){Y.current=!0,P.current={x:t.clientX,y:t.clientY},t.preventDefault();return}if(t.button!==0)return;X.current=!0;const r=k(t),c=D(r);x.current={points:[c],color:F,size:L,tool:C},i()},A=t=>{if(Y.current){const r=t.clientX-(P.current?.x||t.clientX),c=t.clientY-(P.current?.y||t.clientY);P.current={x:t.clientX,y:t.clientY};const o=window.devicePixelRatio||1,l=r*o,a=c*o,{scale:h,offset:d}=p.current;p.current={scale:h,offset:{x:d.x+l,y:d.y+a}},N(I=>I+1),i();return}if(X.current&&x.current){const r=k(t),c=D(r);x.current.points.push(c),i()}},W=()=>{if(Y.current){Y.current=!1;return}X.current&&x.current&&(x.current.points.length>0&&E.current.push(x.current),x.current=null,X.current=!1,i())},G=()=>{p.current={scale:1,offset:{x:0,y:0}},i(),N(t=>t+1)},M=()=>{E.current=[],i(),u(0),s.current=0};return e.jsxs("div",{ref:f,className:`relative w-full h-full bg-white overflow-hidden ${j}`,tabIndex:0,children:[e.jsx("canvas",{ref:v,className:`absolute inset-0 block touch-none w-full h-full ${C==="pan"?"cursor-grab active:cursor-grabbing":"cursor-crosshair"}`,onMouseDown:T,onMouseMove:A,onMouseUp:W,onMouseLeave:W,style:{width:"100%",height:"100%"}}),e.jsx("div",{className:"absolute top-4 right-4 z-20",children:K?e.jsx("button",{onClick:()=>B(!1),className:"bg-black/90 text-white text-xs font-mono rounded-lg p-2 hover:bg-black/95 transition-all",children:"ðŸ”"}):e.jsxs("div",{className:"bg-black/90 text-white text-xs font-mono rounded-lg p-3 space-y-2 max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-bold",children:"Debug"}),e.jsx("button",{onClick:()=>B(!0),className:"text-white/70 hover:text-white",children:"âœ•"})]}),e.jsxs("div",{children:["Objects: ",E.current.length]}),e.jsxs("div",{children:["Undo Count: ",V]}),e.jsxs("div",{children:["Scale: ",p.current.scale.toFixed(2),"x"]}),e.jsxs("div",{children:["Offset: ",Math.round(p.current.offset.x),", ",Math.round(p.current.offset.y)]})]})}),e.jsxs("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-10 bg-white/95 backdrop-blur-sm border border-slate-200 rounded-2xl shadow-lg p-3 flex items-center gap-2",children:[e.jsx("button",{onClick:()=>b("pen"),className:`p-2 rounded-lg transition-all ${C==="pen"?"bg-slate-900 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,title:"Pen",children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b("eraser"),className:`p-2 rounded-lg transition-all ${C==="eraser"?"bg-slate-900 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,title:"Eraser (Whiteout)",children:e.jsx(de,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b("pan"),className:`p-2 rounded-lg transition-all ${C==="pan"?"bg-slate-900 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,title:"Pan Tool",children:e.jsx(ue,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-px h-6 bg-slate-300"}),e.jsxs("div",{className:"flex items-center gap-2",children:[S.map(t=>e.jsx("button",{onClick:()=>{$(t),C==="pan"&&b("pen")},className:`w-6 h-6 rounded-md border-2 ${F===t?"border-slate-900 scale-110":"border-slate-300 hover:border-slate-500"}`,style:{backgroundColor:t}},t)),e.jsxs("div",{className:`relative flex items-center justify-center w-8 h-8 rounded-md border-2 transition-all ${S.includes(F)?"border-slate-300 hover:border-slate-500 hover:bg-slate-50":"border-slate-900 bg-slate-100"}`,children:[e.jsx(he,{className:"w-4 h-4 text-slate-600 pointer-events-none absolute"}),e.jsx("div",{className:"opacity-0 w-full h-full overflow-hidden cursor-pointer",children:e.jsx(ce,{initialColor:F,onActive:()=>{},onColorChange:t=>{$(t),C==="pan"&&b("pen")}})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsxs("span",{className:"text-xs text-slate-600 font-medium min-w-[40px]",children:[L,"px"]}),e.jsx("input",{type:"range",min:"1",max:"20",value:L,onChange:t=>J(Number(t.target.value)),className:"w-20 h-1.5 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-slate-800"})]}),e.jsx("div",{className:"w-px h-6 bg-slate-300"}),e.jsx("button",{onClick:G,className:"px-2 py-1 text-xs font-bold bg-slate-100 rounded hover:bg-slate-200 text-slate-600",children:"100%"}),e.jsx("button",{onClick:M,className:"p-2 rounded-lg bg-slate-100 text-slate-600 hover:bg-rose-100 hover:text-rose-600",children:e.jsx(fe,{className:"w-4 h-4"})})]})]})},ee=j=>e.jsx(pe,{children:e.jsx(me,{...j})});ee.displayName="Whiteboard";const U=1920,_=1080,ge=(j,f="contain")=>{const v=f==="cover"?"xMidYMid slice":"xMidYMid meet";return/preserveAspectRatio\s*=\s*["']/.test(j)?j.replace(/preserveAspectRatio\s*=\s*(["'])[^"']*\1/,`preserveAspectRatio="${v}"`):j.replace(/<svg/i,`<svg preserveAspectRatio="${v}"`)},we=({tradersList:j,openProfile:f})=>{const[v,E]=n.useState(!1),[x,p]=n.useState({w:1920,h:1080}),[N,C]=n.useState(()=>{const s=localStorage.getItem(H.BG_CONFIG);return s?JSON.parse(s):{url:"https://messages-prod.27c852f3500f38c1e7786e2c9ff9e48f.r2.cloudflarestorage.com/019b0caa-d29e-7059-bd9f-2e7bba6eaeca/1765651853929-019b190a-e898-7f6c-9106-6ed883b1c5e4.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=af634fe044bd071ab4c5d356fdace60f%2F20251213%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20251213T185054Z&X-Amz-Expires=3600&X-Amz-Signature=5692804a6ec6ac97d18c6cc24f39a00717974c581afdc93dd15c3436a95dea41&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject",x:0,y:0,scale:1}}),[b,F]=n.useState(()=>{const s=localStorage.getItem(H.BLOCKS);return s?JSON.parse(s):[{id:1765288246843,type:"svg",content:`<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 width="100%" height="100%" viewBox="0 0 1090.000000 229.000000"
 preserveAspectRatio="xMidYMid meet">
<g transform="translate(0.000000,229.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M5232 1461 c-38 -28 -119 -123 -172 -201 -31 -45 -38 -50 -81 -50
-55 0 -100 -11 -96 -24 3 -7 26 -10 65 -8 l62 4 -34 -74 c-31 -69 -36 -75 -95
-105 -69 -36 -144 -45 -154 -18 -7 17 -2 20 43 29 44 8 100 41 100 60 0 51
-85 43 -142 -14 -42 -42 -47 -67 -20 -101 27 -33 94 -29 177 10 59 27 65 28
65 11 0 -55 76 -66 156 -22 l51 29 -11 -28 c-11 -31 -2 -49 18 -34 101 74 161
115 169 115 5 0 7 -14 3 -31 -7 -36 7 -59 35 -59 11 0 49 14 86 30 36 17 67
29 67 28 12 -35 37 -63 59 -69 34 -9 135 19 182 51 39 26 45 25 45 -3 0 -29
29 -57 57 -57 29 0 100 26 132 49 27 20 28 20 44 0 25 -29 89 -25 165 11 34
16 62 27 62 24 0 -3 -7 -18 -15 -34 -25 -48 1 -46 57 4 47 43 53 46 87 39 55
-12 130 -6 157 12 38 24 20 35 -33 19 -37 -11 -58 -12 -104 -3 -50 10 -60 9
-85 -7 -27 -18 -28 -18 -21 -1 14 36 -4 34 -88 -9 -83 -42 -146 -56 -160 -35
-3 6 9 26 26 45 25 29 28 37 16 42 -9 3 -38 -13 -74 -42 -65 -53 -133 -87
-166 -82 -19 3 -22 9 -21 45 1 39 6 47 83 119 92 87 203 228 227 291 28 73 0
95 -62 48 -46 -35 -172 -205 -218 -295 -65 -125 -173 -205 -268 -198 -56 4
-59 29 -4 40 74 16 119 55 95 84 -20 25 -55 15 -183 -51 -69 -36 -132 -65
-139 -65 -10 0 -13 13 -13 43 1 36 -2 42 -22 45 -13 2 -46 -12 -82 -37 -33
-21 -60 -38 -60 -36 0 15 45 75 69 93 42 31 193 222 230 291 17 32 31 68 31
80 0 30 -27 37 -51 15 -31 -28 -126 -162 -208 -295 -41 -66 -89 -130 -110
-147 -57 -46 -116 -74 -148 -70 -25 3 -28 7 -31 43 -3 37 2 46 65 114 l67 74
68 -6 c41 -4 68 -2 68 4 0 13 -45 29 -82 29 l-31 0 27 33 c88 107 146 191 146
213 0 33 -27 31 -78 -5z m883 -60 c-32 -59 -137 -191 -191 -241 l-37 -35 28
50 c50 89 108 169 163 228 31 31 57 55 60 53 2 -3 -8 -27 -23 -55z m-899 -33
c-87 -113 -122 -151 -134 -147 -7 2 12 35 41 74 56 76 136 159 145 151 3 -3
-20 -38 -52 -78z m254 20 c-45 -73 -124 -180 -151 -203 l-23 -20 18 30 c11 17
55 81 99 143 82 116 114 144 57 50z m-424 -226 c-18 -16 -18 -16 -6 6 6 13 14
21 18 18 3 -4 -2 -14 -12 -24z m-216 -87 c0 -9 -62 -36 -73 -32 -7 3 4 12 23
20 37 17 50 20 50 12z m840 0 c0 -2 -14 -12 -31 -20 -40 -21 -63 -13 -24 8 29
16 55 22 55 12z"/>
<path d="M4655 1311 c-44 -38 -116 -110 -159 -160 -74 -84 -83 -91 -125 -96
-25 -4 -52 -7 -59 -8 -31 -5 -8 -22 28 -22 22 0 40 -1 40 -3 0 -1 -7 -14 -16
-28 -11 -16 -14 -28 -7 -35 6 -6 21 5 42 31 l32 40 78 0 79 0 -64 -120 c-35
-67 -64 -127 -64 -135 0 -37 24 -5 90 119 67 127 73 135 103 138 35 3 40 20 8
28 -18 5 -15 14 40 133 95 201 83 231 -46 118z m73 11 c-1 -5 -30 -66 -62
-135 l-60 -127 -73 0 c-40 0 -73 3 -73 6 0 10 253 264 263 264 5 0 7 -4 5 -8z"/>
<path d="M6150 1171 c0 -21 13 -41 26 -41 17 0 18 22 2 38 -14 14 -28 16 -28
3z"/>
</g>
</svg>`,x:1570.173913043478,y:47.0869565217391,w:264.304347826087,h:215.97535456870494,style:{},objectFit:"cover"}]}),[$,L]=n.useState(null),[J,V]=n.useState(!1);b.find(s=>s.id===$);const[u,K]=n.useState({type:null,blockId:null,startX:0,startY:0,initialX:0,initialY:0,initialW:0,initialH:0});n.useEffect(()=>{const s=()=>{p({w:window.innerWidth,h:window.innerHeight})};return window.addEventListener("resize",s),s(),()=>window.removeEventListener("resize",s)},[]),n.useEffect(()=>{localStorage.setItem(H.BG_CONFIG,JSON.stringify(N))},[N]),n.useEffect(()=>{localStorage.setItem(H.BLOCKS,JSON.stringify(b))},[b]);const B=(s,m)=>{F(b.map(g=>g.id===s?{...g,...m}:g))},X=(s,m,g,S)=>{},Y=s=>{if(!u.type||!u.blockId)return;s.preventDefault();const m=x.w/U,g=x.h/_,S=(s.clientX-u.startX)/m,R=(s.clientY-u.startY)/g;if(u.type==="drag")B(u.blockId,{x:u.initialX+S,y:u.initialY+R});else if(u.type==="resize"){const{initialX:i,initialY:k,initialW:D,initialH:T,handle:A}=u;let W=i,G=k,M=D,t=T;A?.includes("e")&&(M=D+S),A?.includes("w")&&(M=D-S,W=i+S),A?.includes("s")&&(t=T+R),A?.includes("n")&&(t=T-R,G=k+R),M<20&&(M=20),t<20&&(t=20),B(u.blockId,{x:W,y:G,w:M,h:t})}},P=()=>{K({...u,type:null,blockId:null})};return e.jsxs("div",{className:"fixed inset-0 z-40 bg-[#111] overflow-hidden select-none w-screen h-screen",onMouseMove:Y,onMouseUp:P,onClick:()=>{},children:[e.jsxs("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden bg-black",children:[e.jsx("div",{className:"w-full h-full",style:{transform:`translate(${N.x}px, ${N.y}px) scale(${N.scale})`,transformOrigin:"center center"},children:e.jsx("img",{src:N.url,alt:"Background",className:"w-full h-full object-cover",style:{filter:"none"}})}),e.jsx("div",{className:"absolute inset-0 bg-black/10"})]}),b.map(s=>{const g=s.x/U*100,S=s.y/_*100,R=s.w/U*100,i=s.h/_*100;return e.jsx("div",{className:"absolute group z-10",style:{left:`${g}%`,top:`${S}%`,width:`${R}%`,height:`${i}%`},onMouseDown:k=>X(),children:e.jsxs("div",{className:"w-full h-full transition-all duration-200",children:[s.type==="image"?e.jsx("div",{className:"w-full h-full overflow-hidden pointer-events-none",children:e.jsx("img",{src:s.content,alt:"Block",className:"w-full h-full",style:{filter:"none",objectFit:s.objectFit||"contain"}})}):s.type==="svg"?e.jsx("div",{className:"w-full h-full pointer-events-none [&>svg]:w-full [&>svg]:h-full [&>svg]:block",style:{shapeRendering:"geometricPrecision"},dangerouslySetInnerHTML:{__html:ge(s.content,s.objectFit)}}):e.jsx("div",{className:"w-full h-full break-words whitespace-pre-wrap pointer-events-none",style:s.style,children:s.content}),!1]})},s.id)})]}),e.jsx("div",{className:"absolute inset-0 z-30",children:e.jsx(ee,{className:"w-full h-full"})})]})},ve=({trader:j,goBack:f})=>e.jsxs("div",{className:"p-10 flex flex-col items-center justify-center min-h-[50vh] text-slate-400",children:[e.jsxs("button",{onClick:f,className:"flex items-center gap-2 mb-4 hover:text-slate-800",children:[e.jsx(xe,{className:"w-4 h-4"})," Go Back"]}),e.jsx("p",{children:"Profile View Placeholder"})]});we.displayName="Traders";ve.displayName="Profile";export{ve as Profile,we as Traders};
